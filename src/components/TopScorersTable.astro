---
interface Props {
  topScorers: Array<{
    pos: number;
    player: string;
    team: string;
    total_points: number;
    games_played: number;
    average: number;
  }>;
  category: 'masculino' | 'femenino';
  phase: string;
  logos?: Record<string, string>;
}

const { topScorers, category, phase, logos = {} } = Astro.props;
import TeamBadge from './TeamBadge.astro';
const accentColor = category === 'masculino' ? 'text-masculino' : 'text-femenino';
const bgColor = category === 'masculino' ? 'bg-masculino' : 'bg-femenino';
---

<div class="bg-white rounded-2xl shadow-xl overflow-hidden">
  <div class={`${bgColor} text-white p-4`}>
    <h3 class="text-xl font-bold flex items-center space-x-2">
      <span>üèÄ</span>
      <span>M√°ximos Anotadores</span>
    </h3>
  </div>
  
  <div class="overflow-x-auto">
    <table class="w-full">
      <thead class="bg-gray-50">
        <tr class="text-sm font-semibold text-gray-700">
          <th class="px-4 py-3 text-left">Pos</th>
          <th class="px-4 py-3 text-left">Jugador</th>
          <th class="px-4 py-3 text-left">Equipo</th>
          <th class="px-4 py-3 text-center">Puntos Totales</th>
          <th class="px-4 py-3 text-center">Partidos</th>
          <th class="px-4 py-3 text-center">Promedio</th>
        </tr>
      </thead>
      <tbody>
        {topScorers.map((scorer, index) => (
          <tr class={`border-b hover:bg-gray-50 transition-colors ${index < 3 ? 'bg-yellow-50' : ''}`}>
            <td class="px-4 py-3">
              <div class="flex items-center space-x-2">
                <span class={`font-bold ${index === 0 ? accentColor : 'text-gray-700'}`}>
                  {scorer.pos}
                </span>
                {index === 0 && <span class="text-yellow-500">ü•á</span>}
                {index === 1 && <span class="text-gray-400">ü•à</span>}
                {index === 2 && <span class="text-orange-600">ü•â</span>}
              </div>
            </td>
            <td class="px-4 py-3">
              <span class="font-semibold text-gray-800">{scorer.player}</span>
            </td>
            <td class="px-4 py-3">
              {
                (() => {
                  const parts = String(scorer.team).split(' - ').map(s => s.trim());
                  const name = parts[0] ?? scorer.team;
                  const city = parts[1] ?? '';
                  const img = logos[name] ?? logos[scorer.team] ?? undefined;
                  return <TeamBadge name={name} city={city} img={img} size="sm" />;
                })()
              }
            </td>
            <td class="px-4 py-3 text-center">
              <span class={`font-bold text-lg ${accentColor}`}>{scorer.total_points}</span>
            </td>
            <td class="px-4 py-3 text-center font-medium">{scorer.games_played}</td>
            <td class="px-4 py-3 text-center">
              <span class="font-bold text-gray-700">{scorer.average.toFixed(1)}</span>
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  </div>
  
  <div class="bg-gray-50 px-4 py-3 text-xs text-gray-600">
    <p><strong>Promedio:</strong> Puntos totales dividido entre partidos jugados</p>
  </div>
</div>